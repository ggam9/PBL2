{% extends "base.html" %}

{% block title %}ê·¸ë£¹ í˜ì´ì§€{% endblock %}

{% block content %}
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: Arial, sans-serif;
    }
    body {
        height: 100vh;
    }
    a:link {
        text-decoration: none;
    }
    .sidebar {
        width: 250px;
        padding: 20px;
        box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
    }
    .sidebar h2 {
        margin-bottom: 15px;
        font-size: 20px;
    }
    .sidebar button {
        padding: 12px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin-left: 5px;
        background: #00ff5e;
        color: #000;
    }
    .sidebar button:hover {
        background-color: #00be00;
    }
    .sidebar ul {
        list-style: none;
    }
    .sidebar ul li {
        padding: 10px;
        border-radius: 5px;
        cursor: pointer;
        margin-bottom: 5px;
    }
    .sidebar ul li a {
    display: block;  /* ë¸”ë¡ ìš”ì†Œë¡œ ì„¤ì •í•˜ì—¬ ì „ì²´ ì˜ì—­ì„ ë®ë„ë¡ í•¨ */
    }
    .sidebar ul li:hover {
        background: #c9f9b0;
    }
    .main {
        flex: 1;
        display: flex;
        flex-direction: column;
    }
    .topbar {
        padding: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }
    .search-box input {
        padding: 8px;
        width: 400px;
        border: 1px solid #ccc;
        border-radius: 5px;
        background-color: #f0ffeb;
    }
    .buttons button {
        padding: 8px 12px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin-left: 5px;
        background: #00ff5e;
        color: #000;
    }
    .buttons button:hover {
        background: #00be00;
    }
    .content {
        flex: 1;
        padding: 20px;
    }
    @media (width >= 500px) {
        .buttons {
            width: 300px;
        }
    }
    .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.4); /* ë°˜íˆ¬ëª… ë°°ê²½ */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999; /* í˜ì´ì§€ì˜ ì–´ë–¤ ìš”ì†Œë³´ë‹¤ ìœ„ì— */
    }

    .modal-content {
    background-color: white;
    padding: 30px;
    border-radius: 10px;
    width: 400px;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }

    .btn-close-popup {
    background-color: #28a745;  /* ì´ˆë¡ìƒ‰ */
    color: white;               /* í°ìƒ‰ ê¸€ì”¨ */
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    font-size: 1em;
    cursor: pointer;
    transition: background-color 0.2s ease;
   }

   .btn-close-popup:hover {
    background-color: #218838;  /* ì‚´ì§ ì–´ë‘ìš´ ì´ˆë¡ (hover íš¨ê³¼) */
   }
</style>
<div style="display: flex; height: 100vh;">
    <div class="sidebar">
        <h2>ë©”ë‰´</h2>
        <ul>
            <li>
                <a href="#" onclick="checkTasks({{ post.id }}); return false;" class="tablink">âœ… í•´ì•¼ í•  ì¼</a>
            </li>
            <li>
                <a href="{{ url_for('group_announcement', post_id=post.id) }}" class="tablink">ğŸ“¢ ê³µì§€</a>
            </li>
            <li>
                <a href="{{ url_for('group_chat', post_id=post.id) }}" class="tablink">ğŸ’¬ ì±„íŒ…</a>
            </li>
            <li>
                <a href="{{ url_for('group_share', post_id=post.id) }}" class="tablink">ğŸ“ ìë£Œ ê³µìœ 
            </li>
            <li>
                <a href="{{ url_for('group_members', post_id=post.id) }}" class="tablink">ë§´ë²„</a>
            </li>
            <li>      
            <a href="{{ url_for('group_quiz', post_id=post.id) }}" class="tablink">ğŸ“– ë¬¸ì œí’€ì´</a>
            </li>
            <li>
                <a href="{{ url_for('group_calender', post_id=post.id) }}" class="tablink">ğŸ“† ì¼ì •</a>
            </li>            
            <button onclick="location.href='{{ url_for('studymode', post_id=post.id) }}'">ğŸ–¥ï¸ ìŠ¤í„°ë”” ì‹œì‘</button>
        </ul>
    </div>

    <div class="main" style="flex: 1; display: flex; flex-direction: column;">
        <div id="content" class="content" style="flex: 1; padding: 20px;">
            {% block group_content %}
            <h1>ëŒ€ì‹œë³´ë“œ</h1>
            <p>ë©”ë‰´ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</p>
            {% endblock %}
        </div>
    </div>
</div>
<script>
function checkTasks(postId) {
    fetch(`/api/todo_status/${postId}`)
        .then(response => {
            if (!response.ok) throw new Error("ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë°œìƒ");
            return response.json();
        })
        .then(data => {
            const quizCount = data.quiz_count;
            const fileCount = data.file_count;

            if (quizCount > 0 || fileCount > 0 || data.schedule_count > 0) {
                let message = "ğŸ“‹ í•´ì•¼ í•  ì¼ì´ ìˆìŠµë‹ˆë‹¤:\n";
                if (quizCount > 0) message += `- í€´ì¦ˆ: ${quizCount}ê°œ í’€ê¸° \n`;
                if (fileCount > 0) message += `- ë´ì•¼ í•  ìë£Œ: ${fileCount}ê°œ\n`;
                if (data.schedule_count > 0) {
                    message += `ğŸ“† ì˜¤ëŠ˜ì¼ì •: ${data.schedule_count}ê°œ\n`;
                }else{message += `ğŸ“† ì˜¤ëŠ˜ì¼ì •: ì—†ìŒ \n`;}
                
                alert(message);
            } else {
                alert("ğŸ‰ í˜„ì¬ í•  ì¼ì´ ì—†ìŠµë‹ˆë‹¤!");
            }
        })
        .catch(error => {
            console.error("í•  ì¼ í™•ì¸ ì‹¤íŒ¨:", error);
            alert("ì‘ì—… ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
        });
}
</script>


{% endblock %}
